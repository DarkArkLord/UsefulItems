<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WHFR4CS</title>
</head>

<body>
    <style>
        * {
            font-family: 'Courier New', Courier, monospace;
        }
    </style>
    <script>
        function render(tag, attributes, ...childs) {
            if (tag instanceof Function) {
                return tag(attributes, ...childs);
            }

            let element = document.createElement(tag);

            if (attributes) {
                for (const name in attributes) {
                    let value = attributes[name];
                    element.setAttribute(name, value);
                }
            }

            for (const child of childs) {
                (function addChild(parent, child) {
                    if (Array.isArray(child)) {
                        for (const innerChild of child) {
                            addChild(parent, innerChild);
                        }
                    } else {
                        parent.appendChild(
                            child instanceof HTMLElement
                                ? child
                                : document.createTextNode(child)
                        );
                    }
                })(element, child);
            }

            return element;
        }

        class DRandom {
            constructor(seed) {
                this.seed = seed;
                this.prevValue = seed;
                this.value = seed;
            }
            next(min, max) {
                this.prevValue = (64525 * this.prevValue + 1013904223) % 4294967296;
                this.value = this.prevValue % (max - min + 1) + min;
                return this.value;
            }
        }

        function float(value, accuracy = 6) {
            const temp = 10 ** accuracy;
            return (value * temp | 0) / temp;
        }

        const rnd = new DRandom(Date.now());
        const checkCount = 100000;
        const diceValue = 10;
        const diceResults = Array.from(Array(checkCount))
            .map(_ => rnd.next(1, diceValue))
            .reduce((acc, cur) => {
                acc[cur] = (acc[cur] || 0) + 1;
                return acc;
            }, {});
        for (const i in diceResults) {
            diceResults[i] = float(diceResults[i] / checkCount * 100);
        }

        (function () {
            const items = Object.keys(diceResults)
                .sort((a, b) => a - b)
                .map(value => `${value} -> ${diceResults[value]}`);

            document.body.append(
                render('ul', false,
                    ...items.map(value => render('li', false, value))
                )
            );
        })();

        (function () {
            const sum = Object.values(diceResults).reduce((acc, cur) => acc += cur, 0);
            const mid = float(sum / diceValue);
            const errors = Object.values(diceResults).map(value => value - mid);
            const midError = float(errors.reduce((acc, cur) => acc += cur, 0) / diceValue);
            const midError2 = float(errors.reduce((acc, cur) => acc += (cur * cur), 0) / diceValue);
            const midError2s = float(Math.sqrt(midError2));

            document.body.append(
                render('ul', false,
                    render('li', false, 'sum -> ', sum),
                    render('li', false, 'mid -> ', mid),
                    render('li', false, 'midError -> ', midError),
                    render('li', false, 'midError2 -> ', midError2),
                    render('li', false, 'midError2s -> ', midError2s),
                )
            );
        })();
    </script>
</body>

</html>